{"version":3,"sources":["js/app.js"],"names":["key","secretKey","validZip","token","fetch","body","headers","method","then","response","json","data","access_token","petForm","document","getElementById","error","results","updateUI","animalInfo","innerHTML","forEach","animal","image","photos","length","medium","name","contact","address","city","state","age","gender","size","email","phone","fetchAnimals","zip","Authorization","animals","addEventListener","e","preventDefault","value","test","setTimeout","textContent","style","color"],"mappings":"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","file":"app.c3f9f951.js","sourceRoot":"..","sourcesContent":["const key = \"fSREaAUTpMY3MrJi8NYXmGMMEdwg75UBt5UfQNxO6ek3xXOCDr\";\r\nconst secretKey = \"fUBTm6BvlmLS6nqPrr8kZ8kjs1XNG4QqHwXgGsDo\";\r\nconst validZip = /^\\d{5}$/;\r\n\r\nlet token;\r\n// get the token first\r\nfetch(\"https://api.petfinder.com/v2/oauth2/token\", {\r\n  body: `grant_type=client_credentials&client_id=${key}&client_secret=${secretKey}`,\r\n  headers: {\r\n    \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n  },\r\n  method: \"POST\"\r\n})\r\n  .then(response => response.json())\r\n  .then(data => {\r\n    token = data.access_token;\r\n  });\r\n\r\n// Access the form\r\nconst petForm = document.getElementById('pet-form');\r\n// Access error\r\nconst error = document.getElementById('error');\r\n// Access results\r\nconst results = document.getElementById('results');\r\n// Functions\r\n\r\n// Update UI\r\nfunction updateUI(animalInfo) {\r\n  results.innerHTML = '<div></div>';\r\n  animalInfo.forEach(animal => {\r\n    let image;\r\n    if (animal.photos.length > 0) {\r\n      image = animal.photos[0].medium;\r\n    } else {\r\n      image = \"<a href='https://www.petfinder.com'><img src='https://www.petfinder.com//banner-images/widgets/40.jpg' border='0' alt='Petfinder Logo, Adopt a homeless pet' /></a>\";\r\n    }\r\n    results.innerHTML += `\r\n      <div class=\"card\">\r\n        <img src=${image} class=\"small rounded\">\r\n        <div class=\"card-body\">\r\n          <h3 class=\"card-title text-center\">${animal.name}</h3>\r\n          <h5 class=\"card-text text-center\">City: ${animal.contact.address.city}</h5>\r\n          <h6 class=\"card-text text-center\">State: ${animal.contact.address.state}</h6>\r\n          <ul class=\"list-group\">\r\n            <li class=\"list-group-item\">Age: ${animal.age}</li>\r\n            <li class=\"list-group-item\">Gender: ${animal.gender}</li>\r\n            <li class=\"list-group-item\">Size: ${animal.size}</li>\r\n            <li class=\"list-group-item\">Email: ${animal.contact.email}</li>\r\n            <li class=\"list-group-item\">Phone: ${animal.contact.phone}</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <br>\r\n    `;\r\n  });\r\n}\r\n// Fetch animals from the API\r\nfunction fetchAnimals(animal, zip) {\r\n  // fetch pets\r\n  // get data using the token\r\n  fetch(`https://api.petfinder.com/v2/animals/?type=${animal}&contact.address.postcode=${zip}`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      updateUI(data.animals);\r\n    });\r\n}\r\n\r\n// Add event listener\r\n// check if the zip code is valid\r\npetForm.addEventListener('submit', e => {\r\n  // since we are adding an event listener on a submit event we are adding the preventDefault()\r\n  // to avoid the form from submitting to a backend page\r\n  e.preventDefault();\r\n  // Access user input\r\n  const animal = document.getElementById('animal').value;\r\n  const zip = document.getElementById('zip').value;\r\n    if (validZip.test(zip)) {\r\n    results.innerHTML = '<div class=\"small\"><iframe src=\"https://giphy.com/embed/lpOxKH3VWxTPi\" width=\"100px\" height=\"100px\" frameBorder=\"0\" class=\"giphy-embed\"></iframe></div>';\r\n    setTimeout(() => {\r\n      fetchAnimals(animal, zip);\r\n    }, 2000);\r\n  } else {\r\n    error.textContent = '(Enter a valid zip code)';\r\n    error.style.color = 'tomato';\r\n    setTimeout(() => {\r\n      error.textContent = '';\r\n    }, 1000);\r\n  }\r\n});\r\n"]}